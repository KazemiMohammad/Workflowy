(this.webpackJsonpworkflowy=this.webpackJsonpworkflowy||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(5),c=n.n(i),d=(n(14),n(15),n(4)),l=n(3),o=(n(16),n(17),n(2)),s={LOAD_DATA:"LOAD_DATA",ADD_NODE:"ADD_NODE",DELETE_NODE:"DELETE_NODE",MOVE_NODE_BACK:"MOVE_NODE_BACK",MOVE_NODE_FORWARD:"MOVE_NODE_FORWARD",UPDATE_NODE_TITLE:"UPDATE_NODE_TITLE"},u=function(e){return{type:s.ADD_NODE,payload:{parentId:e}}},p=n(1);function O(e){var t=Object(o.b)(),n=void 0!==e.treeLevel?e.treeLevel:-1;return console.log(e.treeLevel),Object(p.jsx)("div",{className:"add-task-component",style:{paddingLeft:15*(n+1)},children:Object(p.jsxs)("button",{className:"btn-add",onClick:function(){t(u(e.parentId))},children:[Object(p.jsx)("span",{className:"plus-caption",children:"+"}),"New node"]})})}function f(e){var t=Object(o.b)(),n=Object(r.useState)(!1),a=Object(l.a)(n,2),i=a[0],c=a[1],d=Object(r.useState)(!1),O=Object(l.a)(d,2),f=O[0],j=O[1],v=Object(r.useState)(!1),b=Object(l.a)(v,2),h=b[0],D=b[1],E=Object(r.useState)(!1),I=Object(l.a)(E,2),N=I[0],y=I[1],_=Object(r.useState)(e.title),x=Object(l.a)(_,2),A=x[0],L=x[1],g=function(){c(!1),j(!1),D(!1),y(!1)};return Object(p.jsxs)("div",{className:"task",style:{paddingLeft:15*e.treeLevel},children:[Object(p.jsx)("button",{className:"btn-show-child ".concat(e.showChildren?"":"collapse"),onClick:e.handleShowChildren}),Object(p.jsx)("input",{type:"text",className:"title",value:A,onChange:function(e){L(e.target.value)},onBlur:function(n){t(function(e,t){return console.log(e,t),{type:s.UPDATE_NODE_TITLE,payload:{nodeId:e,title:t}}}(e.id,A))},onKeyDown:function(n){switch(n.key.toLowerCase()){case"enter":t(u(e.parentId)),n.preventDefault();break;case"tab":y(!0),n.preventDefault();break;case"control":c(!0),n.preventDefault();break;case"shift":j(!0),n.preventDefault();break;case"delete":D(!0);break;default:D(!1),c(!1)}},onKeyUp:function(n){var r,a;i&&h&&(t((r=e.id,a=e.parentId,{type:s.DELETE_NODE,payload:{nodeId:r,parentId:a}})),n.preventDefault()),f&&N&&(t(function(e,t){return{type:s.MOVE_NODE_BACK,payload:{nodeId:e,parentId:t}}}(e.id,e.parentId)),n.preventDefault()),!f&&N&&(t(function(e,t){return{type:s.MOVE_NODE_FORWARD,payload:{nodeId:e,parentId:t}}}(e.id,e.parentId)),n.preventDefault()),g()}}),Object(p.jsx)("button",{className:"btn-add-inline",onClick:function(n){t(u(e.id))},children:"+"})]})}function j(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1],c=e.children.map((function(t){return Object(p.jsx)(j,Object(d.a)(Object(d.a)({parentId:e.id},t),{},{treeLevel:e.treeLevel+1}),t.id)}));return Object(p.jsxs)("div",{className:"task-item",children:[Object(p.jsx)(f,{title:e.title,id:e.id,parentId:e.parentId,handleShowChildren:function(e){i(!a)},showChildren:a,treeLevel:e.treeLevel},e.id),a&&Object(p.jsxs)(p.Fragment,{children:[c,!c.length&&Object(p.jsx)(O,{treeLevel:e.treeLevel,parentId:e.id})]})]})}n(23);var v=function(e){return e};function b(){var e=Object(o.c)(v);return Object(p.jsxs)("div",{className:"task-list-component",children:[Object(p.jsx)("div",{className:"header",children:"Workflowy"}),Object(p.jsx)("div",{children:e.map((function(e){return Object(p.jsx)(j,Object(d.a)(Object(d.a)({parentId:0},e),{},{treeLevel:0}),e.id)}))}),Object(p.jsx)(O,{parentId:0})]})}var h=n(9),D="tasks";var E=function(){var e=localStorage.getItem(D),t=JSON.parse(e);return t||[]},I=function(e){var t=JSON.stringify(e);localStorage.setItem(D,t)},N=function(e,t){var n=JSON.parse(JSON.stringify(e)),r=function(e){return{id:Math.floor(1e4*Math.random()),parentId:e,title:"Untitled ",children:[]}}(t);if(0===t)n.push(r);else{var a=L(n,t);a&&a.children.push(r)}return I(n),n},y=function(e,t,n){var r=JSON.parse(JSON.stringify(e)),a=L(r,n);if(0===n){var i=r.findIndex((function(e){return e.id===t}));r.splice(i,1)}else if(a){var c=a.children.findIndex((function(e){return e.id===t}));a.children.splice(c,1)}return I(r),r};var _=function(e,t,n){if(0!==n){var r=JSON.parse(JSON.stringify(e)),a=L(r,t),i=L(r,n);if(r=y(e,t,n),0===i.parentId)a.parentId=0,r.push(a);else{var c=L(r,i.parentId);a.parentId=c.id,console.log(c),c.children.push(a)}return I(r),r}},x=function(e,t,n){var r=JSON.parse(JSON.stringify(e)),a=L(r,t),i=L(r,n);if(0===a.parentId){if(1===r.length)return;var c=r.findIndex((function(e){return e.id===t}));if(0===c)return;r.splice(c,1);var d=r[c-1];a.parentId=d.id,d.children.push(a)}else if(i.children.length>1){var l=i.children.findIndex((function(e){return e.id===t}));if(0===l)return;i.children.splice(l,1);var o=i.children[l-1];a.parentId=o.id,o.children.push(a)}return I(r),r},A=function(e,t,n){if(t){var r=L(e,t);return r&&(r.title=n),console.log(e),I(e),e}};function L(e,t){var n;for(var r in e){if(e.id===t)return e;if("object"===typeof e[r]&&(n=L(e[r],t)))return n}return n}var g=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.LOAD_DATA:return E();case s.ADD_NODE:return N(e,t.payload.parentId);case s.DELETE_NODE:return y(e,t.payload.nodeId,t.payload.parentId);case s.MOVE_NODE_BACK:return _(e,t.payload.nodeId,t.payload.parentId);case s.MOVE_NODE_FORWARD:return x(e,t.payload.nodeId,t.payload.parentId);case s.UPDATE_NODE_TITLE:return A(e,t.payload.nodeId,t.payload.title);default:return e}}));var m=function(){return Object(p.jsx)(o.a,{store:g,children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(b,{})})})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.a1113fac.chunk.js.map